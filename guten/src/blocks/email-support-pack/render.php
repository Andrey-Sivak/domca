<?php
/**
 * Template for rendering the Email Support Pack block.
 *
 * @package domca
 */

$domca_email_support_pack_title    = $attributes['title'] ?? '';
$domca_email_support_pack_subtitle = $attributes['subtitle'] ?? '';
$domca_email_support_pack_items    = $attributes['items'] ?? array();
$domca_email_support_pack_button   = $attributes['button'] ?? '';

$domca_email_support_pack_base_class = 'wp-block-domca-email-support-pack';

$domca_email_support_pack_wrapper_attributes = get_block_wrapper_attributes(
	array(
		'class' => 'dm-wrap',
	)
);

// Item SVG background (from ItemBgSvg.js)
$domca_email_support_pack_item_bg_svg = '<svg
		preserveAspectRatio="none"
		aria-hidden="true"
		viewBox="0 0 338 365"
		fill="none"
		class="' . esc_attr( $domca_email_support_pack_base_class . '__item-decor' ) . '"
	>
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M328.4 191.144L292.998 226.553C287.959 162.366 234.285 111.852 168.815 111.852C103.346 111.852 49.6757 162.366 44.637 226.553L9.23448 191.144C-3.07816 178.83 -3.07816 158.867 9.23448 146.552L146.523 9.23604C158.835 -3.07868 178.799 -3.07868 191.108 9.23604L328.4 146.552C340.713 158.867 340.713 178.83 328.4 191.144Z"
			class="' . esc_attr( $domca_email_support_pack_base_class . '__item-decor-fill' ) . '"
		/>
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M337.596 170.439C337.219 162.909 334.156 155.49 328.401 149.733L191.108 12.4176C178.8 0.10287 158.836 0.10287 146.523 12.4176L9.23507 149.733C3.4838 155.49 0.417308 162.909 0.0440694 170.439C-0.388548 161.844 2.6737 153.114 9.23507 146.552L146.523 9.23604C158.836 -3.07868 178.8 -3.07868 191.108 9.23604L328.401 146.552C334.962 153.114 338.024 161.844 337.596 170.439Z"
			fill="white"
		/>
		<g opacity="0.25">
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 203.871L292.998 239.279C287.959 175.093 234.285 124.578 168.815 124.578C103.346 124.578 49.6759 175.093 44.6371 239.279L9.23461 203.871C1.45173 196.087 -1.41118 185.244 0.65012 175.211C1.84618 181.048 4.70909 186.614 9.23461 191.145L44.6371 226.553C49.6759 162.366 103.346 111.852 168.815 111.852C234.285 111.852 287.959 162.366 292.998 226.553L328.4 191.145C332.93 186.614 335.793 181.048 336.985 175.211C339.046 185.244 336.183 196.087 328.4 203.871Z"
				fill="white"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 203.022L292.997 238.431C287.958 174.244 234.284 123.73 168.815 123.73C103.345 123.73 49.6751 174.244 44.6364 238.431L9.23387 203.022C1.53243 195.32 -1.34362 184.618 0.608668 174.681C1.75001 180.631 4.6265 186.32 9.23387 190.932L44.6364 226.341C49.6751 162.154 103.345 111.64 168.815 111.64C234.284 111.64 287.958 162.154 292.997 226.341L328.4 190.932C333.011 186.32 335.887 180.631 337.025 174.681C338.977 184.618 336.101 195.32 328.4 203.022Z"
				fill="#FCFAF9"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 202.174L292.998 237.582C287.959 173.396 234.285 122.881 168.815 122.881C103.346 122.881 49.6759 173.396 44.6371 237.582L9.23461 202.174C1.61461 194.553 -1.27502 183.991 0.569115 174.151C1.65532 180.213 4.54538 186.026 9.23461 190.72L44.6371 226.129C49.6759 161.942 103.346 111.427 168.815 111.427C234.285 111.427 287.959 161.942 292.998 226.129L328.4 190.72C333.093 186.026 335.983 180.213 337.066 174.151C338.91 183.991 336.02 194.553 328.4 202.174Z"
				fill="#F9F4F3"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.401 201.325L292.998 236.734C287.959 172.547 234.285 122.033 168.816 122.033C103.346 122.033 49.6761 172.547 44.6374 236.734L9.23486 201.325C1.69628 193.786 -1.2065 183.365 0.529064 173.62C1.56056 179.796 4.46419 185.732 9.23486 190.508L44.6374 225.917C49.6761 161.73 103.346 111.215 168.816 111.215C234.285 111.215 287.959 161.73 292.998 225.917L328.401 190.508C333.175 185.732 336.078 179.796 337.107 173.62C338.842 183.365 335.939 193.786 328.401 201.325Z"
				fill="#F6EFED"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 200.477L292.997 235.886C287.959 171.699 234.284 121.184 168.815 121.184C103.345 121.184 49.6754 171.699 44.6367 235.886L9.23412 200.477C1.77698 193.019 -1.13894 182.739 0.487613 173.09C1.4644 179.379 4.3816 185.439 9.23412 190.296L44.6367 225.705C49.6754 161.518 103.345 111.003 168.815 111.003C234.284 111.003 287.959 161.518 292.997 225.705L328.4 190.296C333.257 185.439 336.173 179.379 337.147 173.09C338.773 182.739 335.857 193.019 328.4 200.477Z"
				fill="#F3EAE6"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.401 199.629L292.999 235.037C287.96 170.85 234.285 120.336 168.816 120.336C103.346 120.336 49.6764 170.85 44.6377 235.037L9.23514 199.629C1.85943 192.252 -1.07007 182.113 0.448337 172.56C1.36998 178.961 4.30075 185.145 9.23514 190.084L44.6377 225.493C49.6764 161.306 103.346 110.791 168.816 110.791C234.285 110.791 287.96 161.306 292.999 225.493L328.401 190.084C333.339 185.145 336.269 178.961 337.189 172.56C338.706 182.113 335.777 192.252 328.401 199.629Z"
				fill="#F0E5E0"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 197.932L292.998 233.34C287.959 169.154 234.285 118.639 168.815 118.639C103.346 118.639 49.6756 169.154 44.6369 233.34L9.23432 197.932C2.02148 190.718 -0.934315 180.861 0.366506 171.499C1.17872 178.126 4.13664 184.557 9.23432 189.66L44.6369 225.068C49.6756 160.881 103.346 110.367 168.815 110.367C234.285 110.367 287.959 160.881 292.998 225.068L328.4 189.66C333.502 184.557 336.458 178.126 337.27 171.499C338.569 180.861 335.613 190.718 328.4 197.932Z"
				fill="#EADAD4"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 197.083L292.998 232.492C287.959 168.305 234.285 117.791 168.815 117.791C103.346 117.791 49.676 168.305 44.6373 232.492L9.23474 197.083C2.10334 189.951 -0.866028 180.235 0.326639 170.969C1.08372 177.709 4.05521 184.263 9.23474 189.448L44.6373 224.856C49.676 160.669 103.346 110.155 168.815 110.155C234.285 110.155 287.959 160.669 292.998 224.856L328.4 189.448C333.584 184.263 336.553 177.709 337.311 170.969C338.501 180.235 335.532 189.951 328.4 197.083Z"
				fill="#E6D5CE"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 196.235L292.998 231.644C287.959 167.457 234.285 116.942 168.815 116.942C103.346 116.942 49.6757 167.457 44.637 231.644L9.23448 196.235C2.18451 189.184 -0.798005 179.609 0.286084 170.439C0.988451 177.292 3.97351 183.97 9.23448 189.236L44.637 224.644C49.6757 160.457 103.346 109.943 168.815 109.943C234.285 109.943 287.959 160.457 292.998 224.644L328.4 189.236C333.665 183.97 336.648 177.292 337.351 170.439C338.433 179.609 335.45 189.184 328.4 196.235Z"
				fill="#E3D0C8"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 195.387L292.997 230.795C287.959 166.608 234.284 116.094 168.815 116.094C103.345 116.094 49.6754 166.608 44.6367 230.795L9.23413 195.387C2.26559 188.417 -0.730073 178.982 0.245013 169.909C0.892667 176.874 3.8913 183.675 9.23413 189.023L44.6367 224.432C49.6754 160.245 103.345 109.731 168.815 109.731C234.284 109.731 287.959 160.245 292.997 224.432L328.4 189.023C333.747 183.675 336.743 176.874 337.391 169.909C338.364 178.982 335.368 188.417 328.4 195.387Z"
				fill="#E0CAC2"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.401 194.538L292.999 229.947C287.96 165.76 234.286 115.245 168.816 115.245C103.347 115.245 49.6766 165.76 44.6379 229.947L9.23537 194.538C2.34827 187.65 -0.660966 178.356 0.205966 169.378C0.798906 176.457 3.81111 183.382 9.23537 188.811L44.6379 224.22C49.6766 160.033 103.347 109.519 168.816 109.519C234.286 109.519 287.96 160.033 292.999 224.22L328.401 188.811C333.83 183.382 336.839 176.457 337.433 169.378C338.297 178.356 335.288 187.65 328.401 194.538Z"
				fill="#DDC5BC"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 193.69L292.998 229.098C287.959 164.911 234.285 114.397 168.815 114.397C103.346 114.397 49.6758 164.911 44.6371 229.098L9.23456 193.69C2.42889 186.883 -0.59349 177.73 0.164864 168.848C0.702667 176.039 3.72844 183.088 9.23456 188.599L44.6371 224.008C49.6758 159.821 103.346 109.306 168.815 109.306C234.285 109.306 287.959 159.821 292.998 224.008L328.4 188.599C333.911 183.088 336.933 176.039 337.473 168.848C338.228 177.73 335.206 186.883 328.4 193.69Z"
				fill="#DAC0B5"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 192.841L292.998 228.25C287.959 164.063 234.285 113.549 168.815 113.549C103.346 113.549 49.6756 164.063 44.6369 228.25L9.23432 192.841C2.51009 186.116 -0.525446 177.104 0.123905 168.318C0.606994 175.622 3.64634 182.794 9.23432 188.387L44.6369 223.796C49.6756 159.609 103.346 109.094 168.815 109.094C234.285 109.094 287.959 159.609 292.998 223.796L328.4 188.387C333.992 182.794 337.028 175.622 337.514 168.318C338.16 177.104 335.124 186.116 328.4 192.841Z"
				fill="#D7BBAF"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.4 191.993L292.998 227.401C287.959 163.215 234.285 112.7 168.815 112.7C103.346 112.7 49.6756 163.215 44.6369 227.401L9.23435 191.993C2.59155 185.349 -0.457552 176.478 0.0836438 167.788C0.51202 175.205 3.56494 182.5 9.23435 188.175L44.6369 223.584C49.6756 159.397 103.346 108.882 168.815 108.882C234.285 108.882 287.959 159.397 292.998 223.584L328.4 188.175C334.074 182.5 337.123 175.205 337.555 167.788C338.092 176.478 335.043 185.349 328.4 191.993Z"
				fill="#D4B5A9"
			/>
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M328.401 191.144L292.998 226.553C287.96 162.366 234.285 111.852 168.816 111.852C103.346 111.852 49.6763 162.366 44.6376 226.553L9.23507 191.144C2.6737 184.582 -0.388548 175.852 0.0440694 167.257C0.417308 174.787 3.4838 182.206 9.23507 187.963L44.6376 223.371C49.6763 159.185 103.346 108.67 168.816 108.67C234.285 108.67 287.96 159.185 292.998 223.371L328.401 187.963C334.156 182.206 337.219 174.787 337.596 167.257C338.024 175.852 334.962 184.582 328.401 191.144Z"
				fill="#D1B0A3"
			/>
		</g>
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M293.387 236.445C293.387 305.256 237.613 361.039 168.815 361.039C100.016 361.039 44.2461 305.256 44.2461 236.445C44.2461 233.115 44.3776 229.815 44.6363 226.553C49.675 162.366 103.345 111.852 168.815 111.852C234.284 111.852 287.958 162.366 292.997 226.553C293.256 229.815 293.387 233.115 293.387 236.445Z"
			fill="#FCFAFA"
		/>
		<path
			d="M50.1226 189.322C57.4416 173.409 62.2815 159.398 78.0827 143.987C94.6073 129.672 98.1287 128.614 120.396 118.001C137.399 110.614 156.122 108.655 168.815 108.799C173.207 108.807 176.9 108.976 179.72 109.05C190.751 109.65 191.716 111.382 206.723 115.214C221.629 119.632 230.113 124.398 240.956 132.484C252.983 139.459 279.457 171.798 284.581 186.315C291.253 199.406 293.416 216.179 293.694 226.498C293.71 226.876 293.726 227.246 293.74 227.607C293.864 230.807 293.789 233.327 293.668 235.253C293.615 236.069 293.488 236.445 293.365 236.445C293.365 236.445 293.364 236.445 293.364 236.445C293.21 236.445 293.062 235.863 293.029 234.821C292.957 232.544 292.786 229.762 292.416 226.599C291.966 222.718 291.217 218.29 290.015 213.551C285.31 197.78 286.463 195.285 275.701 175.738C263.697 157.034 254.007 147.267 232.718 132.499C210.493 119.823 203.662 118.417 168.815 115.062C168.349 115.042 167.88 115.024 167.405 115.009C130.974 116.306 126.443 121.157 97.007 140.733C67.6317 161.2 48.5399 204.316 48.4271 226.85C48.3916 227.316 48.3604 227.769 48.3331 228.212C48.171 230.847 48.0914 233.597 48.1127 236.445C48.087 257.114 54.4548 283.258 69.9873 305.717C86.9903 331.826 122.109 353.112 156.23 356.595C160.216 357.092 164.433 357.413 168.815 357.502C202.1 359.557 239.847 339.694 253.806 325.361C270.003 309.513 273.483 304.491 282.447 284.554C287.322 272.924 291.683 256.007 292.852 241.248C293.386 233.823 293.997 235.489 293.971 243.034C293.784 254.121 291.588 262.999 290.794 268.682C288.975 280.023 287.849 285.165 280.366 297.685C272.532 309.918 269.428 316.211 263.61 322.516C256.9 327.622 259.609 331.364 221.868 352.522C200.789 362.548 182.69 364.682 168.815 364.929C156.755 365.058 147.546 363.638 140.055 362.046C123.63 359.388 91.7398 343.483 73.9423 322.994C55.9567 306.619 38.2954 262.334 39.9897 236.445C39.9475 233.199 40.0184 230.279 40.1241 227.778C40.1469 227.24 40.1732 226.714 40.2026 226.201C42.1108 205.72 43.7835 205.324 50.1226 189.322Z"
			fill="white"
		/>
	</svg>';

$domca_email_support_pack_separator = '<svg
			viewBox="0 0 1920 12"
			fill="none"
			class="' . esc_attr( $domca_email_support_pack_base_class . '__separator' ) . '"
			preserveAspectRatio="none"
			aria-hidden="true"
	>
		<path d="M1075.47 2.27872C1117.85 3.07663 1151.21 -0.449966 1202.86 0.0484999C1254.52 0.546973 1262.25 2.41764 1321.41 1.99674C1380.56 1.57592 1439.75 2.8554 1466.09 2.08683C1492.42 1.31803 1495.2 3.64238 1532.6 3.12614C1570.01 2.60996 1592.67 2.91336 1625.38 3.66886C1658.09 4.42438 1758.59 5.06938 1795.13 4.14127C1831.67 3.21317 1873.35 4.82355 1898.42 5.20548C1906.23 5.32445 1912.37 5.48726 1917.08 5.65665C1919.08 5.72848 1920 5.87873 1920 6.02704C1920 6.02714 1920 6.02724 1920 6.02733C1920 6.212 1918.57 6.39358 1916.01 6.41691C1903.56 6.53017 1884.95 6.829 1862.97 7.49869C1821.99 8.74744 1817.51 7.36752 1762.16 8.00919C1706.82 8.65086 1673.57 9.93371 1608.46 9.10416C1543.34 8.27468 1528.38 11.746 1436.47 9.77872C1344.55 7.81159 1334.88 11.442 1243.28 11.9247C1151.68 12.4074 1036.06 10.4044 980.84 10.5705C925.623 10.7366 851.463 11.1594 773.187 10.6803C694.91 10.2012 598.281 11.4107 511.876 10.5558C425.473 9.701 303.316 8.62133 246.881 7.89786C190.448 7.17441 176.694 7.01123 122.374 7.45328C91.151 7.70739 48.138 7.46787 11.8059 6.53336C-6.47869 6.06305 -2.33538 5.40821 16.0687 5.09489C42.9815 4.63673 65.0739 4.94281 78.9409 4.12443C106.65 2.48886 118.427 1.86143 153.408 2.81339C188.387 3.76524 204.869 1.60201 225.259 1.85099C245.651 2.10009 245.316 3.37605 348.997 2.39298C452.68 1.40987 509.519 1.15902 548.783 0.923011C588.048 0.686997 670.033 1.7944 734.024 1.39469C798.015 0.995004 928.105 1.36132 980.547 0.706947C1032.99 0.0526252 1033.09 1.48082 1075.47 2.27872Z"/>
	</svg>'
?>

<section
		<?php
        // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped
		echo $domca_email_support_pack_wrapper_attributes;
		?>
>
	<?php echo wp_kses( $domca_email_support_pack_separator, domca_get_svg_allowed_html() ); ?>
	<?php echo wp_kses( $domca_email_support_pack_separator, domca_get_svg_allowed_html() ); ?>

	<div class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__wrap dm-container' ); ?>">
		<?php if ( ! empty( $domca_email_support_pack_title ) ) : ?>
			<h2 class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__title dm-heading dm-heading-h2' ); ?>">
				<?php echo wp_kses_post( $domca_email_support_pack_title ); ?>
			</h2>
		<?php endif; ?>

		<?php if ( ! empty( $domca_email_support_pack_subtitle ) ) : ?>
			<p class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__subtitle' ); ?>">
				<?php echo wp_kses_post( $domca_email_support_pack_subtitle ); ?>
			</p>
		<?php endif; ?>

		<?php if ( ! empty( $domca_email_support_pack_items ) && is_array( $domca_email_support_pack_items ) ) : ?>
			<div class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__items' ); ?>">
				<?php foreach ( $domca_email_support_pack_items as $domca_item ) : ?>
					<?php
					$domca_item_text = is_array( $domca_item ) ? ( $domca_item['text'] ?? '' ) : $domca_item;
					?>
					<div class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__item' ); ?>">
						<?php echo wp_kses( $domca_email_support_pack_item_bg_svg, domca_get_svg_allowed_html() ); ?>
						<?php if ( ! empty( $domca_item_text ) ) : ?>
							<div class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__item-text-wrap' ); ?>">
								<p class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__item-text' ); ?>">
									<?php echo wp_kses_post( $domca_item_text ); ?>
								</p>
							</div>
						<?php endif; ?>
					</div>
				<?php endforeach; ?>
			</div>
		<?php endif; ?>

		<?php if ( ! empty( $domca_email_support_pack_button ) ) : ?>
			<p class="<?php echo esc_attr( $domca_email_support_pack_base_class . '__button dm-button dm-button-primary' ); ?>">
				<?php echo wp_kses_post( $domca_email_support_pack_button ); ?>
			</p>
		<?php endif; ?>
	</div>
</section>
