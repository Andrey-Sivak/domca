<?php
/**
 * Template for rendering the Start Date Info block.
 *
 * @package domca
 */

$domca_start_date_info_title   = $attributes['title'] ?? '';
$domca_start_date_info_caption = $attributes['caption'] ?? '';
$domca_start_date_info_text    = $attributes['text'] ?? '';
$domca_start_date_info_image   = $attributes['image'] ?? null;

$domca_start_date_info_image_id  = $domca_start_date_info_image['id'] ?? null;
$domca_start_date_info_image_url = $domca_start_date_info_image['url'] ?? '';

$domca_start_date_info_base_class = 'wp-block-domca-start-date-info';

$domca_start_date_info_wrapper_attributes = get_block_wrapper_attributes(
	array(
		'class' => 'dm-wrap',
	)
);

// Section separator SVG (rendered twice as in editor)
$domca_start_date_info_separator_svg = '<svg
	viewBox="0 0 1920 12"
	fill="none"
	class="' . esc_attr( $domca_start_date_info_base_class . '__separator' ) . '"
	preserveAspectRatio="none"
	aria-hidden="true"
>
	<path d="M1075.47 2.27872C1117.85 3.07663 1151.21 -0.449966 1202.86 0.0484999C1254.52 0.546973 1262.25 2.41764 1321.41 1.99674C1380.56 1.57592 1439.75 2.8554 1466.09 2.08683C1492.42 1.31803 1495.2 3.64238 1532.6 3.12614C1570.01 2.60996 1592.67 2.91336 1625.38 3.66886C1658.09 4.42438 1758.59 5.06938 1795.13 4.14127C1831.67 3.21317 1873.35 4.82355 1898.42 5.20548C1906.23 5.32445 1912.37 5.48726 1917.08 5.65665C1919.08 5.72848 1920 5.87873 1920 6.02704C1920 6.02714 1920 6.02724 1920 6.02733C1920 6.212 1918.57 6.39358 1916.01 6.41691C1903.56 6.53017 1884.95 6.829 1862.97 7.49869C1821.99 8.74744 1817.51 7.36752 1762.16 8.00919C1706.82 8.65086 1673.57 9.93371 1608.46 9.10416C1543.34 8.27468 1528.38 11.746 1436.47 9.77872C1344.55 7.81159 1334.88 11.442 1243.28 11.9247C1151.68 12.4074 1036.06 10.4044 980.84 10.5705C925.623 10.7366 851.463 11.1594 773.187 10.6803C694.91 10.2012 598.281 11.4107 511.876 10.5558C425.473 9.701 303.316 8.62133 246.881 7.89786C190.448 7.17441 176.694 7.01123 122.374 7.45328C91.151 7.70739 48.138 7.46787 11.8059 6.53336C-6.47869 6.06305 -2.33538 5.40821 16.0687 5.09489C42.9815 4.63673 65.0739 4.94281 78.9409 4.12443C106.65 2.48886 118.427 1.86143 153.408 2.81339C188.387 3.76524 204.869 1.60201 225.259 1.85099C245.651 2.10009 245.316 3.37605 348.997 2.39298C452.68 1.40987 509.519 1.15902 548.783 0.923011C588.048 0.686997 670.033 1.7944 734.024 1.39469C798.015 0.995004 928.105 1.36132 980.547 0.706947C1032.99 0.0526252 1033.09 1.48082 1075.47 2.27872Z"/>
</svg>';

// Background SVG
$domca_start_date_info_bg_svg = '<svg
	class="' . esc_attr( $domca_start_date_info_base_class . '__decor' ) . '"
	preserveAspectRatio="none"
	aria-hidden="true"
	viewBox="0 0 1444 305"
	fill="none"
>
	<path
		d="M3 62C3 31.6243 27.6243 7 58 7H1382C1412.38 7 1437 31.6243 1437 62V242C1437 272.376 1412.38 297 1382 297H58C27.6244 297 3 272.376 3 242V62Z"
		fill="white"
	/>
	<path
		d="M1180.31 301.652C1106.29 300.654 1048.02 305.062 957.801 304.439C867.581 303.816 854.069 301.478 750.744 302.004C647.425 302.53 544.046 300.931 498.041 301.891C452.038 302.852 447.183 299.947 381.854 300.592C316.528 301.238 276.935 300.858 219.803 299.914C188.641 299.399 122.265 298.925 58 298.789C25.2205 299.483 -0.0470902 268.634 1.14413 242C1.05384 222.799 0.902498 206.135 0.67659 193.706C-0.118899 149.939 0.577508 101.955 1.24779 62C1.4633 42.8741 11.6327 27.1959 22.56 18.6477C33.5024 9.95189 44.6819 7.35708 52.8684 6.80523C56.3849 6.59127 57.9963 6.86485 58 7.0338C58 7.03392 58 7.03404 58 7.03416C57.9946 7.2881 55.5019 7.38815 51.1024 7.95358C32.8006 9.27857 3.88672 28.7493 4.59841 62C4.68397 66.3194 4.7755 70.7271 4.87337 75.2154C6.38277 144.437 4.8197 154.037 5.44011 242C5.46126 244.877 5.71606 247.831 6.25037 250.829C11.0516 277.849 35.6004 294.4 58 293.667C116.19 292.975 168.821 292.385 249.368 293.12C363.103 294.157 389.227 289.818 549.776 292.277C710.322 294.736 727.219 290.198 887.209 289.594C1047.2 288.991 1249.16 291.495 1345.6 291.287C1357.26 291.262 1369.41 291.232 1382 291.2C1406.25 291.966 1431.54 269.924 1430.99 242C1430.88 186.285 1430.81 125.373 1430.95 62C1431.2 44.3347 1420.83 26.7903 1404.77 18.4312C1397.9 14.7792 1390.04 12.773 1382 12.7605C1250.35 12.4336 1093.38 13.6953 952.074 12.6948C801.156 11.6263 587.79 10.2767 489.217 9.37233C390.649 8.46801 366.624 8.26403 271.746 8.8166C217.21 9.13424 142.081 8.83484 78.621 7.6667C46.6839 7.07881 53.9209 6.26026 86.0666 5.86861C133.074 5.29591 171.662 5.67851 195.883 4.65553C244.281 2.61107 264.851 1.82679 325.951 3.01674C387.048 4.20655 415.836 1.50251 451.452 1.81374C487.069 2.12512 486.483 3.72007 667.58 2.49123C848.679 1.26234 947.957 0.94878 1016.54 0.653764C1085.12 0.358747 1228.32 1.743 1340.09 1.24336C1352.71 1.18696 1366.8 1.14276 1382 1.10755C1411.04 -0.16453 1443.62 26.6259 1443.01 62C1443.06 120.992 1443.06 185.266 1443.15 242C1443.69 278.937 1409.64 304.613 1382 303.385C1368.55 303.448 1356.46 303.524 1346.11 303.616C1254.52 304.434 1254.33 302.649 1180.31 301.652Z"
		fill="#817676"
	/>
</svg>';

$domca_start_date_info_bg_svg_mob = '<svg
	class="' . esc_attr( $domca_start_date_info_base_class . '__decor-mob' ) . '"
	preserveAspectRatio="none"
	aria-hidden="true"
	viewBox="0 0 499 585"
	fill="none"
>
	<path
			d="M61 5.5C30.6243 5.5 6 30.1243 6 60.5L6 523.5C6 553.876 30.6243 578.5 61 578.5H436C466.376 578.5 491 553.876 491 523.5L491 60.5C491 30.1243 466.376 5.5 436 5.5L61 5.5Z"
			fill="white"
		/>
		<path
			d="M495.652 401.92C494.654 357.299 499.062 322.174 498.439 267.787C497.816 213.402 495.478 205.256 496.004 142.97C496.246 114.37 496.039 85.7628 495.838 60.5C495.571 26.6749 468.642 7.60673 453.738 3.28014C446.857 0.931581 441.055 0.387633 436 0.482389C421.296 0.838166 412.42 2.39802 382.495 1.90767C343.116 1.26245 319.249 1.64169 284.809 2.58608C250.366 3.53047 144.554 4.33672 106.078 3.17659C91.415 2.73447 75.9665 2.75319 61 2.97213C34.7456 2.99453 15.3687 22.749 9.705 38.0142C6.48571 45.7696 5.7332 52.4183 5.65583 57.4041C5.63582 59.5179 5.85425 60.5006 6.0338 60.5C6.03392 60.5 6.03404 60.5 6.03416 60.5C6.2734 60.4946 6.45424 59.0006 6.67808 56.3333C7.40201 43.7086 15.7455 23.1173 36.5076 13.3431C45.875 8.96771 54.0009 7.9847 61 8.01643C83.4087 8.23582 96.9259 7.40772 140.789 8.01149C199.06 8.81358 234.069 10.4171 302.631 9.3802C358.032 8.54238 378.948 11.2148 436 10.9741C448.095 10.877 462.837 15.2635 474.354 27.9907C483.373 38.06 486.891 50.0761 486.951 60.5C487.449 123.68 484.106 143.423 483.594 225.233C482.991 321.678 485.495 443.42 485.287 501.558C485.262 508.589 485.232 515.913 485.2 523.5C486.024 546.855 464.603 572.903 436 572.399C401.203 572.337 363.917 572.372 325.7 572.65C246.42 573.226 149.259 571.849 61 572.694C57.8653 572.728 54.7457 572.471 51.6891 571.928C30.8946 568.844 10.7056 548.303 10.8256 523.5C9.9606 446.821 9.04375 364.56 8.37233 320.444C7.46801 261.025 7.26403 246.543 7.8166 189.349C8.13424 156.474 7.83484 111.185 6.6667 72.9306C6.07881 53.6785 5.26026 58.0411 4.86861 77.4189C4.29591 105.756 4.67851 129.017 3.65553 143.618C1.61107 172.793 0.826786 185.193 2.01674 222.025C3.20655 258.854 0.502513 276.209 0.813737 297.678C1.12512 319.149 2.72007 318.795 1.49123 427.963C1.073 465.116 0.760789 496.557 0.519247 523.5C0.769755 564.66 36.6283 585.581 61 584.652C71.4561 584.723 80.8384 584.785 89.4228 584.846C130.764 585.141 217.088 583.757 284.464 584.257C322.068 584.535 381.351 584.516 436 584.587C473.469 585.293 498.868 549.649 497.385 523.5C497.448 515.39 497.524 508.106 497.616 501.866C498.434 446.652 496.649 446.539 495.652 401.92Z"
			fill="#817676"
		/>
</svg>';
?>

<section
		<?php
        // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped
		echo $domca_start_date_info_wrapper_attributes;
		?>
>
	<?php
	// Two separators as in editor preview.
	echo wp_kses( $domca_start_date_info_separator_svg, domca_get_svg_allowed_html() );
	echo wp_kses( $domca_start_date_info_separator_svg, domca_get_svg_allowed_html() );
	?>

	<div class="<?php echo esc_attr( $domca_start_date_info_base_class . '__wrap dm-container' ); ?>">
		<?php if ( ! empty( $domca_start_date_info_title ) ) : ?>
			<h2 class="<?php echo esc_attr( $domca_start_date_info_base_class . '__title dm-heading dm-heading-h2' ); ?>">
				<?php echo wp_kses_post( $domca_start_date_info_title ); ?>
			</h2>
		<?php endif; ?>

		<div class="<?php echo esc_attr( $domca_start_date_info_base_class . '__content' ); ?>">
			<?php
			echo wp_kses( $domca_start_date_info_bg_svg, domca_get_svg_allowed_html() );
			echo wp_kses( $domca_start_date_info_bg_svg_mob, domca_get_svg_allowed_html() );
			?>

			<div class="<?php echo esc_attr( $domca_start_date_info_base_class . '__content-inner' ); ?>">
				<?php if ( ! empty( $domca_start_date_info_caption ) ) : ?>
					<p class="<?php echo esc_attr( $domca_start_date_info_base_class . '__caption' ); ?>">
						<?php echo wp_kses_post( $domca_start_date_info_caption ); ?>
					</p>
				<?php endif; ?>

				<?php if ( ! empty( $domca_start_date_info_text ) ) : ?>
					<p class="<?php echo esc_attr( $domca_start_date_info_base_class . '__text' ); ?>">
						<?php echo wp_kses_post( $domca_start_date_info_text ); ?>
					</p>
				<?php endif; ?>
			</div>

			<?php if ( ! empty( $domca_start_date_info_image ) ) : ?>
				<figure class="<?php echo esc_attr( $domca_start_date_info_base_class . '__image' ); ?>">
					<?php echo wp_get_attachment_image( $domca_start_date_info_image['id'], 'full', false, array() ); ?>
				</figure>
			<?php endif; ?>
		</div>
	</div>
</section>
