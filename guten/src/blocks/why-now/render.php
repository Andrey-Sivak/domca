<?php
/**
 * Template for rendering the "Why Now" block.
 *
 * @package domca
 */

$domca_why_now_title         = $attributes['title'] ?? '';
$domca_why_now_title_reasons = $attributes['reasons'] ?? array();

$domca_why_now_wrapper_attributes = get_block_wrapper_attributes(
	array(
		'class' => 'dm-wrap',
	)
);

$domca_why_now_base_class = 'wp-block-domca-why-now';

// Item background SVG from ItemBgSvg.js
$domca_why_now_item_bg_svg = '<svg
		preserveAspectRatio="none"
		aria-hidden="true"
		viewBox="0 0 466 166"
		fill="none"
		class="' . esc_attr( $domca_why_now_base_class . '__reason-decor' ) . '"
	>
		<path
			d="M3 46C3 23.9086 20.9086 6 43 6H421C443.091 6 461 23.9086 461 46V120C461 142.091 443.091 160 421 160H43C20.9086 160 3 142.091 3 120V46Z"
			fill="white"
		/>
		<path
			d="M351.517 163.721C326.016 162.923 305.942 166.45 274.86 165.952C243.779 165.453 239.124 163.582 203.527 164.003C167.933 164.424 132.319 163.145 116.469 163.913C100.621 164.682 98.9481 162.358 76.4418 162.874C63.2492 163.176 53.1029 163.197 43 163.011C35.3531 162.862 27.6827 160.71 20.5233 155.877C13.3021 151.442 1.00113 137.946 1.4533 120C1.6887 96.8049 1.68008 71.0694 1.14127 58.3038C0.971411 54.2793 0.886579 50.1513 0.863684 46C0.262366 25.5301 18.0224 10.1225 29.9836 7.32634C34.5739 5.91724 38.3762 5.65598 41.2282 5.69487C42.4378 5.71736 43.0007 5.88135 43 6.02704C43 6.02714 43 6.02724 43 6.02733C42.998 6.21571 42.1398 6.37685 40.6206 6.48723C33.355 6.90454 21.7944 10.5559 13.8739 20.8193C6.4658 31.014 5.37738 37.9666 4.96149 46C4.85272 53.5904 4.70747 62.4821 5.00919 78.1412C5.31339 93.9287 5.7617 106.728 6.06072 120C6.4057 133.29 13.7845 148.597 31.9159 155.203C35.7711 156.512 39.5145 157.027 43 157.026C72.5969 157.012 85.2119 154.476 134.293 156.221C189.602 158.188 195.423 154.558 250.541 154.075C305.659 153.593 375.234 155.596 408.46 155.43C412.479 155.409 416.664 155.386 421 155.36C437.431 155.964 456.428 140.774 456.099 120C456.091 104.075 456.147 87.4095 456.32 70.4217C456.4 62.562 456.433 54.3948 456.436 46C457.056 28.0181 440.384 10.2235 421 10.8082C397.452 10.9089 373.65 10.928 351.015 10.5558C299.023 9.701 225.517 8.62133 191.558 7.89786C157.6 7.17441 149.323 7.01123 116.637 7.45328C97.8491 7.70739 71.9665 7.46787 50.1041 6.53336C39.1015 6.06305 41.5947 5.40821 52.6692 5.09489C68.8636 4.63673 82.1575 4.94281 90.5018 4.12443C107.175 2.48886 114.262 1.86143 135.311 2.81339C156.359 3.76524 166.277 1.60201 178.547 1.85099C190.818 2.10009 190.616 3.37605 253.005 2.39298C315.395 1.40987 349.597 1.15902 373.224 0.923011C384.57 0.809675 401.844 1.00613 421 1.19673C444.587 0.449906 466.462 23.4403 465.597 46C465.599 46.2858 465.602 46.571 465.605 46.8557C465.797 65.2864 465.812 92.8297 465.849 120C466.55 147.347 439.791 166.329 421 165.108C416.365 165.158 412.202 165.219 408.636 165.293C377.082 165.947 377.017 164.519 351.517 163.721Z"
			fill="#817676"
		/>
	</svg>';
?>

<section
	<?php
	// phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped
	echo $domca_why_now_wrapper_attributes;
	?>
>

	<svg
			width="73"
			height="176"
			viewBox="0 0 73 176"
			fill="none"
			class="<?php echo $domca_why_now_base_class; ?>__clip"
	>
		<path
				d="M25.2101 6.76839C29.0192 1.75086 34.2188 -0.448775 40.5772 0.075632C50.917 0.926901 58.445 6.01281 63.5838 14.9278C67.6694 22.0173 69.589 29.7745 70.7915 37.7513C72.9039 51.7475 72.8004 65.82 71.7628 79.8826C70.3054 99.6274 67.0356 119.047 60.632 137.852C57.8244 146.096 54.5859 154.15 49.976 161.582C46.8402 166.638 42.6731 170.621 37.689 173.921C32.3935 177.426 21.3557 176.179 17.0233 172.561C10.6197 167.213 6.57741 160.501 4.15373 152.645C2.34933 146.824 1.6314 140.83 1.13533 134.795C-0.270295 122.647 -0.201288 110.447 0.431392 98.2818C1.1312 84.8068 2.37971 71.3586 3.43413 57.901C3.55874 56.3117 3.89625 54.7285 4.26436 53.1742C4.65759 51.5126 5.78344 50.4052 7.29353 49.635C10.2834 48.1096 12.9119 49.7246 12.737 53.1135C12.5392 56.9784 12.2748 60.8442 11.8676 64.6927C9.9988 82.3659 9.1015 100.093 9.24575 117.855C9.31922 127.01 9.42349 136.196 11.2831 145.235C12.2422 149.89 13.637 154.412 16.1568 158.453C17.4884 160.59 19.1402 162.59 20.9248 164.373C24.1996 167.65 32.4575 168.853 37.0673 164.535C40.1437 161.654 42.7867 158.503 44.7401 154.789C50.4432 143.942 54.4056 132.459 57.2366 120.554C60.2839 107.746 61.8853 94.7253 62.8407 81.6331C63.4914 72.6951 63.9188 63.7151 63.8599 54.7583C63.7777 42.0787 60.2536 30.1488 54.5619 18.8684C51.6878 13.1706 46.9824 9.80873 40.6575 8.8332C37.2503 8.30756 34.1902 9.13845 32.082 11.9848C30.6328 13.9401 29.3279 16.0663 28.3313 18.283C24.962 25.7787 23.6767 33.7929 22.7791 41.8897C22.6235 43.2952 22.4805 44.7013 22.3464 46.1075H20.2767C20.3898 44.9069 20.5076 43.7064 20.636 42.5065C21.522 34.2213 22.7362 26.0048 26.0599 18.2839C27.0239 16.0445 28.0475 13.6815 29.6285 11.8878C32.1008 9.08279 34.226 7.41432 36.6072 6.7351C38.8158 6.10768 41.2454 6.33091 44.3798 7.2961C50.266 9.10964 54.2984 12.9791 56.9449 18.4083C61.3226 27.3906 64.3363 36.8078 65.5213 46.7438C66.7812 57.3008 66.2072 67.8757 65.3578 78.4268C64.0841 94.2477 62.3258 110.005 58.2402 125.403C55.3732 136.209 51.5799 146.664 46.2155 156.507C44.0666 160.452 41.1695 163.754 37.7135 166.649C36.8707 167.354 35.8515 167.93 34.7235 168.371C29.8344 170.279 22.8991 169.656 19.3524 166.055C17.3843 164.057 15.5639 161.83 14.0881 159.45C11.5331 155.323 10.1198 150.7 9.14686 145.952C7.22 136.538 7.10196 126.974 7.05562 117.442C7.0059 107.625 7.18745 97.791 7.76445 87.992C8.39897 77.2554 9.5961 66.5523 10.5655 55.8372C10.6494 54.9013 10.9776 53.9756 10.9914 53.045C11.0145 51.464 9.93503 50.7122 8.4909 51.2122C8.43145 51.2325 8.37042 51.2522 8.30978 51.2768C6.98514 51.8161 6.39118 52.7366 6.20972 54.2835C3.39628 78.3267 1.74471 102.427 2.82614 126.645C3.20169 135.042 3.84706 143.442 6.26749 151.576C8.26883 158.3 11.5291 164.218 16.6366 169.178C20.7699 173.192 28.5872 175.484 35.0475 172.845C36.4922 172.256 37.8693 171.421 39.1223 170.303C41.0921 168.546 43.2635 166.917 44.8439 164.847C47.1816 161.785 49.3132 158.51 51.1088 155.102C56.1505 145.529 59.5505 135.31 62.3179 124.883C67.0627 107.009 69.4632 88.7824 70.162 70.3281C70.5833 59.1702 70.272 48.0302 68.5104 36.973C67.6918 31.8289 66.5217 26.7677 64.6089 21.9172C60.5914 11.7302 53.921 4.50527 42.7624 2.06408C40.3076 1.52693 38.0092 1.6543 35.7456 2.20114C35.6809 2.21675 35.6164 2.2338 35.5517 2.25009C35.084 2.36811 34.6169 2.50227 34.1507 2.65346C34.008 2.69982 33.8666 2.74759 33.7268 2.79738C29.4768 4.30907 26.5929 7.39676 24.6696 11.4639C22.392 16.2815 21.0845 21.4008 20.0476 26.5951C18.7577 33.0618 17.9134 39.5728 17.3258 46.1075H15.2307C15.7927 39.7383 16.6092 33.393 17.878 27.0934C18.7709 22.6641 19.9637 18.2698 21.4065 13.9908C22.2672 11.4376 23.5831 8.91363 25.2101 6.76839Z"
				fill="#393E41"
		/>
		<path
				d="M20.2767 46.1075C20.3898 44.9069 20.5076 43.7064 20.636 42.5065C21.522 34.2213 22.7362 26.0048 26.0599 18.2839C27.0239 16.0445 28.0475 13.6815 29.6285 11.8878C32.1008 9.08279 34.226 7.41432 36.6072 6.7351C38.8158 6.10768 41.2454 6.33091 44.3798 7.2961C50.266 9.10964 54.2984 12.9791 56.9449 18.4083C61.3226 27.3906 64.3363 36.8078 65.5213 46.7438C66.7812 57.3008 66.2072 67.8757 65.3578 78.4268C64.0841 94.2477 62.3258 110.005 58.2402 125.403C55.3732 136.209 51.5799 146.664 46.2155 156.507C44.0666 160.452 41.1695 163.754 37.7135 166.649C36.8707 167.354 35.8515 167.93 34.7235 168.371C29.8344 170.279 22.8991 169.656 19.3524 166.055C17.3843 164.057 15.5639 161.83 14.0881 159.45C11.5331 155.323 10.1198 150.7 9.14686 145.952C7.22 136.538 7.10196 126.974 7.05562 117.442C7.0059 107.625 7.18745 97.791 7.76445 87.992C8.39897 77.2554 9.5961 66.5523 10.5655 55.8372C10.6494 54.9013 10.9776 53.9756 10.9914 53.045C11.0145 51.464 9.93503 50.7122 8.4909 51.2122C8.43145 51.2325 8.37042 51.2522 8.30978 51.2768C6.98514 51.8161 6.39118 52.7366 6.20972 54.2835C3.39628 78.3267 1.74471 102.427 2.82614 126.645C3.20169 135.042 3.84706 143.442 6.26749 151.576C8.26883 158.3 11.5291 164.218 16.6366 169.178C20.7699 173.192 28.5872 175.484 35.0475 172.845C36.4922 172.256 37.8693 171.421 39.1223 170.303C41.0921 168.546 43.2635 166.917 44.8439 164.847C47.1816 161.785 49.3132 158.51 51.1088 155.102C56.1505 145.529 59.5505 135.31 62.3179 124.883C67.0627 107.009 69.4632 88.7824 70.162 70.3281C70.5833 59.1702 70.272 48.0302 68.5104 36.973C67.6918 31.8289 66.5217 26.7677 64.6089 21.9172C60.5914 11.7302 53.921 4.50527 42.7624 2.06408C40.3076 1.52693 38.0092 1.6543 35.7456 2.20114C35.6809 2.21675 35.6164 2.2338 35.5517 2.25009C35.084 2.36811 34.6169 2.50227 34.1507 2.65346C34.008 2.69982 33.8666 2.74759 33.7268 2.79738C29.4768 4.30907 26.5929 7.39676 24.6696 11.4639C22.392 16.2815 21.0845 21.4008 20.0476 26.5951C18.7577 33.0618 17.9134 39.5728 17.3258 46.1075H20.2767Z"
				fill="#CBA2A2"
		/>
	</svg>

	<div class="<?php echo esc_attr( $domca_why_now_base_class . '__wrap dm-container' ); ?>">
		<?php if ( ! empty( $domca_why_now_title ) ) : ?>
			<h2 class="<?php echo esc_attr( $domca_why_now_base_class . '__title dm-heading dm-heading-h2' ); ?>">
				<?php echo wp_kses_post( $domca_why_now_title ); ?>
			</h2>
		<?php endif; ?>

		<?php if ( ! empty( $domca_why_now_title_reasons ) && is_array( $domca_why_now_title_reasons ) ) : ?>
			<div class="<?php echo esc_attr( $domca_why_now_base_class . '__reasons' ); ?>">
				<?php foreach ( $domca_why_now_title_reasons as $domca_reason ) : ?>
					<?php
					$domca_reason_title = $domca_reason['title'] ?? '';
					$domca_reason_text  = $domca_reason['text'] ?? '';
					?>
					<div class="<?php echo esc_attr( $domca_why_now_base_class . '__reason' ); ?>">
						<?php echo wp_kses( $domca_why_now_item_bg_svg, domca_get_svg_allowed_html() ); ?>

						<?php if ( ! empty( $domca_reason_title ) ) : ?>
							<p class="<?php echo esc_attr( $domca_why_now_base_class . '__reason-title' ); ?>">
								<?php echo wp_kses_post( $domca_reason_title ); ?>
							</p>
						<?php endif; ?>

						<?php if ( ! empty( $domca_reason_text ) ) : ?>
							<p class="<?php echo esc_attr( $domca_why_now_base_class . '__reason-text' ); ?>">
								<?php echo wp_kses_post( $domca_reason_text ); ?>
							</p>
						<?php endif; ?>
					</div>
				<?php endforeach; ?>
			</div>
		<?php endif; ?>
	</div>
</section>
