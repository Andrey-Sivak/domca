<?php
/**
 *  Template for rendering the reviews slider block.
 *
 * @package domca
 */

$domca_reviews_slider_title        = $attributes['title'] ?? '';
$domca_reviews_slider_use_subtitle = $attributes['useSubtitle'] ?? true;
$domca_reviews_slider_subtitle     = $attributes['subtitle'] ?? '';
$domca_reviews_slider_items        = $attributes['items'] ?? null;
$domca_reviews_slider_use_button   = $attributes['useButton'] ?? true;
$domca_reviews_slider_button       = $attributes['button'] ?? '';

$domca_reviews_slider_wrapper_attributes = get_block_wrapper_attributes(
	array(
		'class' => 'dm-wrap',
	)
);

$domca_reviews_slider_base_class = 'wp-block-domca-reviews-slider';
?>

<section
	<?php
	// phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped
	echo $domca_reviews_slider_wrapper_attributes;
	?>
>
	<svg
			width="73"
			height="176"
			viewBox="0 0 73 176"
			fill="none"
			class="<?php echo $domca_reviews_slider_base_class; ?>__clip"
	>
		<path
				d="M25.2101 6.76839C29.0192 1.75086 34.2188 -0.448775 40.5772 0.075632C50.917 0.926901 58.445 6.01281 63.5838 14.9278C67.6694 22.0173 69.589 29.7745 70.7915 37.7513C72.9039 51.7475 72.8004 65.82 71.7628 79.8826C70.3054 99.6274 67.0356 119.047 60.632 137.852C57.8244 146.096 54.5859 154.15 49.976 161.582C46.8402 166.638 42.6731 170.621 37.689 173.921C32.3935 177.426 21.3557 176.179 17.0233 172.561C10.6197 167.213 6.57741 160.501 4.15373 152.645C2.34933 146.824 1.6314 140.83 1.13533 134.795C-0.270295 122.647 -0.201288 110.447 0.431392 98.2818C1.1312 84.8068 2.37971 71.3586 3.43413 57.901C3.55874 56.3117 3.89625 54.7285 4.26436 53.1742C4.65759 51.5126 5.78344 50.4052 7.29353 49.635C10.2834 48.1096 12.9119 49.7246 12.737 53.1135C12.5392 56.9784 12.2748 60.8442 11.8676 64.6927C9.9988 82.3659 9.1015 100.093 9.24575 117.855C9.31922 127.01 9.42349 136.196 11.2831 145.235C12.2422 149.89 13.637 154.412 16.1568 158.453C17.4884 160.59 19.1402 162.59 20.9248 164.373C24.1996 167.65 32.4575 168.853 37.0673 164.535C40.1437 161.654 42.7867 158.503 44.7401 154.789C50.4432 143.942 54.4056 132.459 57.2366 120.554C60.2839 107.746 61.8853 94.7253 62.8407 81.6331C63.4914 72.6951 63.9188 63.7151 63.8599 54.7583C63.7777 42.0787 60.2536 30.1488 54.5619 18.8684C51.6878 13.1706 46.9824 9.80873 40.6575 8.8332C37.2503 8.30756 34.1902 9.13845 32.082 11.9848C30.6328 13.9401 29.3279 16.0663 28.3313 18.283C24.962 25.7787 23.6767 33.7929 22.7791 41.8897C22.6235 43.2952 22.4805 44.7013 22.3464 46.1075H20.2767C20.3898 44.9069 20.5076 43.7064 20.636 42.5065C21.522 34.2213 22.7362 26.0048 26.0599 18.2839C27.0239 16.0445 28.0475 13.6815 29.6285 11.8878C32.1008 9.08279 34.226 7.41432 36.6072 6.7351C38.8158 6.10768 41.2454 6.33091 44.3798 7.2961C50.266 9.10964 54.2984 12.9791 56.9449 18.4083C61.3226 27.3906 64.3363 36.8078 65.5213 46.7438C66.7812 57.3008 66.2072 67.8757 65.3578 78.4268C64.0841 94.2477 62.3258 110.005 58.2402 125.403C55.3732 136.209 51.5799 146.664 46.2155 156.507C44.0666 160.452 41.1695 163.754 37.7135 166.649C36.8707 167.354 35.8515 167.93 34.7235 168.371C29.8344 170.279 22.8991 169.656 19.3524 166.055C17.3843 164.057 15.5639 161.83 14.0881 159.45C11.5331 155.323 10.1198 150.7 9.14686 145.952C7.22 136.538 7.10196 126.974 7.05562 117.442C7.0059 107.625 7.18745 97.791 7.76445 87.992C8.39897 77.2554 9.5961 66.5523 10.5655 55.8372C10.6494 54.9013 10.9776 53.9756 10.9914 53.045C11.0145 51.464 9.93503 50.7122 8.4909 51.2122C8.43145 51.2325 8.37042 51.2522 8.30978 51.2768C6.98514 51.8161 6.39118 52.7366 6.20972 54.2835C3.39628 78.3267 1.74471 102.427 2.82614 126.645C3.20169 135.042 3.84706 143.442 6.26749 151.576C8.26883 158.3 11.5291 164.218 16.6366 169.178C20.7699 173.192 28.5872 175.484 35.0475 172.845C36.4922 172.256 37.8693 171.421 39.1223 170.303C41.0921 168.546 43.2635 166.917 44.8439 164.847C47.1816 161.785 49.3132 158.51 51.1088 155.102C56.1505 145.529 59.5505 135.31 62.3179 124.883C67.0627 107.009 69.4632 88.7824 70.162 70.3281C70.5833 59.1702 70.272 48.0302 68.5104 36.973C67.6918 31.8289 66.5217 26.7677 64.6089 21.9172C60.5914 11.7302 53.921 4.50527 42.7624 2.06408C40.3076 1.52693 38.0092 1.6543 35.7456 2.20114C35.6809 2.21675 35.6164 2.2338 35.5517 2.25009C35.084 2.36811 34.6169 2.50227 34.1507 2.65346C34.008 2.69982 33.8666 2.74759 33.7268 2.79738C29.4768 4.30907 26.5929 7.39676 24.6696 11.4639C22.392 16.2815 21.0845 21.4008 20.0476 26.5951C18.7577 33.0618 17.9134 39.5728 17.3258 46.1075H15.2307C15.7927 39.7383 16.6092 33.393 17.878 27.0934C18.7709 22.6641 19.9637 18.2698 21.4065 13.9908C22.2672 11.4376 23.5831 8.91363 25.2101 6.76839Z"
				fill="#393E41"
		/>
		<path
				d="M20.2767 46.1075C20.3898 44.9069 20.5076 43.7064 20.636 42.5065C21.522 34.2213 22.7362 26.0048 26.0599 18.2839C27.0239 16.0445 28.0475 13.6815 29.6285 11.8878C32.1008 9.08279 34.226 7.41432 36.6072 6.7351C38.8158 6.10768 41.2454 6.33091 44.3798 7.2961C50.266 9.10964 54.2984 12.9791 56.9449 18.4083C61.3226 27.3906 64.3363 36.8078 65.5213 46.7438C66.7812 57.3008 66.2072 67.8757 65.3578 78.4268C64.0841 94.2477 62.3258 110.005 58.2402 125.403C55.3732 136.209 51.5799 146.664 46.2155 156.507C44.0666 160.452 41.1695 163.754 37.7135 166.649C36.8707 167.354 35.8515 167.93 34.7235 168.371C29.8344 170.279 22.8991 169.656 19.3524 166.055C17.3843 164.057 15.5639 161.83 14.0881 159.45C11.5331 155.323 10.1198 150.7 9.14686 145.952C7.22 136.538 7.10196 126.974 7.05562 117.442C7.0059 107.625 7.18745 97.791 7.76445 87.992C8.39897 77.2554 9.5961 66.5523 10.5655 55.8372C10.6494 54.9013 10.9776 53.9756 10.9914 53.045C11.0145 51.464 9.93503 50.7122 8.4909 51.2122C8.43145 51.2325 8.37042 51.2522 8.30978 51.2768C6.98514 51.8161 6.39118 52.7366 6.20972 54.2835C3.39628 78.3267 1.74471 102.427 2.82614 126.645C3.20169 135.042 3.84706 143.442 6.26749 151.576C8.26883 158.3 11.5291 164.218 16.6366 169.178C20.7699 173.192 28.5872 175.484 35.0475 172.845C36.4922 172.256 37.8693 171.421 39.1223 170.303C41.0921 168.546 43.2635 166.917 44.8439 164.847C47.1816 161.785 49.3132 158.51 51.1088 155.102C56.1505 145.529 59.5505 135.31 62.3179 124.883C67.0627 107.009 69.4632 88.7824 70.162 70.3281C70.5833 59.1702 70.272 48.0302 68.5104 36.973C67.6918 31.8289 66.5217 26.7677 64.6089 21.9172C60.5914 11.7302 53.921 4.50527 42.7624 2.06408C40.3076 1.52693 38.0092 1.6543 35.7456 2.20114C35.6809 2.21675 35.6164 2.2338 35.5517 2.25009C35.084 2.36811 34.6169 2.50227 34.1507 2.65346C34.008 2.69982 33.8666 2.74759 33.7268 2.79738C29.4768 4.30907 26.5929 7.39676 24.6696 11.4639C22.392 16.2815 21.0845 21.4008 20.0476 26.5951C18.7577 33.0618 17.9134 39.5728 17.3258 46.1075H20.2767Z"
				fill="#CBA2A2"
		/>
	</svg>

	<div class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__wrap dm-container' ); ?>">
		<h2 class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__title dm-heading dm-heading-h2 dm-animate' ); ?>">
			<?php echo wp_kses_post( $domca_reviews_slider_title ); ?>
		</h2>
		<?php if ( ! empty( $domca_reviews_slider_subtitle ) && $domca_reviews_slider_use_subtitle ) : ?>
			<p class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__subtitle dm-animate' ); ?>">
				<?php echo wp_kses_post( $domca_reviews_slider_subtitle ); ?>
			</p>
		<?php endif; ?>

		<?php if ( ! empty( $domca_reviews_slider_items ) ) : ?>
			<div
					class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__list' . ( count( $domca_reviews_slider_items ) > 3 ? '' : ' dm-items-' . count( $domca_reviews_slider_items ) ) ); ?>"
			>

				<?php
				if ( count( $domca_reviews_slider_items ) > 3 ) {
					echo '<div class="swiper-wrapper" role="list">';
				}
				?>

				<?php foreach ( $domca_reviews_slider_items as $domca_reviews_slider_item ) : ?>
					<?php if ( ! empty( $domca_reviews_slider_item['text'] ) || ! empty( $domca_reviews_slider_item['author'] ) ) : ?>
						<div class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__item' . ( count( $domca_reviews_slider_items ) > 3 ? ' swiper-slide' : '' ) ); ?>">
							<svg
									viewBox="0 0 467 427"
									fill="none"
									class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__item-decor' ); ?>"
									preserveAspectRatio="none"
									aria-hidden="true"
							>
								<path
										d="M59.2784 341.001L230.299 393.475C261.187 412.307 305.541 393.646 325.691 353.341L442.493 119.704C464.672 75.3405 446.6 27.4928 405.821 22.6118L147.991 21.0787C117.982 20.9002 88.2433 46.4285 79.1653 80.1603L28.0844 269.963C19.3077 302.575 32.585 332.811 59.2784 341.001Z"
										fill="#CBA2A2"
								/>
								<path
										d="M117.306 39.3994L374.096 14.5347C393.558 12.6503 410.581 17.4009 422.508 26.6172"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
								<path
										d="M47.2102 101.059C44.9271 59.6553 86.3826 21.9193 131.331 24.4855L368.05 38.0009C398.798 39.7565 424.353 60.8588 423.98 85.9566L400.859 302.385C396.691 330.692 371.309 355.196 340.32 360.435L155.341 391.71C122.466 397.268 93.7614 379.417 88.9081 350.396L47.2102 101.059Z"
										fill="white"
								/>
								<path
										d="M74.7131 45.0575C34.3315 57.8623 5.49062 99.29 13.4604 138.555L61.6102 375.81C69.9156 416.738 114.776 436.264 158.084 417.798L354.154 334.217"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
								<path
										d="M445.072 37.3121C458.91 49.2887 466.607 67.1682 464.698 87.7888L450.211 244.235C447.504 273.493 425.83 301.162 395.536 314.2"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
								<path
										d="M103.784 17.1448C107.209 17.4308 109.802 19.7864 110.086 23.7013C110.321 26.9321 108.009 29.5021 104.764 29.8691C98.1232 30.62 94.7115 24.8852 94.8468 19.0085C94.9573 14.2085 97.3157 10.1418 101.166 7.08534C102.889 5.71882 104.575 4.48772 106.473 3.4501C106.871 3.23263 107.364 3.40638 107.525 3.81838C108.01 5.06689 109.092 6.60831 107.869 7.49034C101.105 12.3698 99.6083 16.7964 103.784 17.1448Z"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
								<path
										d="M85.2299 20.8392C88.6549 21.1252 91.2481 23.4808 91.5328 27.3957C91.7677 30.6266 89.4553 33.1964 86.2099 33.5635C79.5695 34.3143 76.1578 28.5795 76.2931 22.7028C76.4036 17.9028 78.762 13.8362 82.6123 10.7797C84.3349 9.41315 86.0211 8.18205 87.9193 7.14443C88.3172 6.92697 88.8108 7.10072 88.9709 7.51272C89.4561 8.76122 90.5382 10.3025 89.3155 11.1847C82.5516 16.0642 81.0546 20.4906 85.2299 20.8392Z"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
								<path
										d="M363.899 332.804C360.451 332.89 357.603 330.833 356.884 326.979C356.291 323.799 358.313 320.999 361.51 320.285C368.051 318.823 372.09 324.145 372.608 329.99C373.03 334.765 371.129 339.055 367.627 342.503C366.06 344.045 364.515 345.448 362.736 346.683C362.364 346.942 361.852 346.822 361.646 346.431C361.024 345.245 359.773 343.832 360.895 342.825C367.101 337.253 368.103 332.699 363.899 332.804Z"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
								<path
										d="M381.938 327.105C378.489 327.191 375.641 325.134 374.923 321.28C374.33 318.099 376.351 315.3 379.548 314.585C386.089 313.123 390.129 318.445 390.646 324.291C391.068 329.066 389.167 333.355 385.665 336.804C384.099 338.345 382.553 339.749 380.775 340.984C380.402 341.242 379.89 341.123 379.685 340.732C379.062 339.545 377.812 338.133 378.934 337.125C385.14 331.554 386.142 327 381.938 327.105Z"
										stroke="#393E41"
										stroke-width="2.5"
										stroke-miterlimit="10"
								/>
							</svg>

							<div class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__item-content' ); ?>">

								<?php if ( ! empty( $domca_reviews_slider_item['text'] ) ) : ?>
									<blockquote
											class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__item-text' ); ?>">
										<?php echo wp_kses_post( $domca_reviews_slider_item['text'] ); ?>
									</blockquote>
								<?php endif; ?>

								<div class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__item-author' ); ?>">
									<?php if ( ! empty( $domca_reviews_slider_item['author'] ) ) : ?>
										<cite class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__author' ); ?>">
											<?php echo '– ' . wp_kses_post( $domca_reviews_slider_item['author'] ); ?>
										</cite>
									<?php endif; ?>
								</div>
							</div>
						</div>
					<?php endif; ?>
				<?php endforeach; ?>

				<?php
				if ( count( $domca_reviews_slider_items ) > 3 ) {
					echo '</div>';
					echo '<div class="' . esc_attr( $domca_reviews_slider_base_class ) . '__pagination swiper-pagination"></div>';
				}
				?>
			</div>
		<?php endif; ?>

		<?php if ( $domca_reviews_slider_use_button && ! empty( $domca_reviews_slider_button ) ) : ?>
			<p class="<?php echo esc_attr( $domca_reviews_slider_base_class . '__button dm-button dm-button-white' ); ?>">
				<?php echo wp_kses_post( $domca_reviews_slider_button ); ?>
			</p>
		<?php endif; ?>
	</div>
</section>
